(function(){var a=[].indexOf||function(a){for(var b=0,c=this.length;c>b;b++)if(b in this&&this[b]===a)return b;return-1},b=[].slice;!function(c){var d;return d=function(){function b(a,b){var d,e,f,g;this.options=c.extend({},this.defaults,b),this.$select=c(a),this.$select.hide().wrap("<div class="+this.options.wrapClass+"/>"),this.$wrap=this.$select.parents("."+this.options.wrapClass),g=this.$select.find("option:selected").html(),e=c("<div class="+this.options.labelClass+"/>").html(g),this.$wrap.append(e),f=this.privates.populate(this.$select),d=c("<ul class="+this.options.dropClass+">"+f+"</ul>"),d.hide(),this.$wrap.append(d),this.$wrap.on("click","li",function(){return this.$select[0].value=c(this).data("value"),this.privates.fire($select[0],"change")}),this.$select.on("change",function(){var a;return a=this.$select.val(),g=$select.find("option[value = "+a+"]").html(),e.html(g)}),e.on("click",function(a){return d.is(":visible")?void 0:(a.stopPropagation(),d.show(),c("html").one("click",function(){return d.hide()}))}),this.privates.mutationObserver(this.$select,c.proxy(function(){return this.$wrap=this.parents("."+this.options.wrapClass),this.$wrap.find("."+this.options.dropClass).html(this.privates.populate(this))},this.$select))}return b.prototype.defaults={wrapClass:"prettyselect-wrap",labelClass:"prettyselect-label",dropClass:"prettyselect-drop"},b.prototype.privates={fire:function(b,c){var d;return a.call(document,"createEvent")>=0?(d=document.createEvent("HTMLEvents"),d.initEvent(c,!1,!0),b.dispatchEvent(d)):b.fireEvent("on"+c)},populate:function(a){var b,d;return b="",d=a.val(),a.find("option").each(function(){var a;return a=c(this),b+='<li data-value="'+a.attr("value")+'">'+a.html()+"</li>"}),b},mutationObserver:function(a,b){var d,e,f;return window.MutationObserver?(d=window.MutationObserver,f=new d(b),f.observe(a[0],{subtree:!0,attributes:!1,childList:!0}),a.data("mutationObserver",f)):(e=setInterval(c.proxy(function(){var a,c;return a=this.element.html(),c=this.element.data("mo-html"),a!==c?(this.element.data("mo-html",a),b()):void 0},{element:a,callBack:b}),200),a.data("mutationObserver",e))}},b.prototype.destroy=function(){var a,b,c,d;return c=this.$select.parents("."+this.options.wrapClass),a=c.find("."+this.options.labelClass),b=c.find("."+this.options.dropClass),d=this.$select.data("mutationObserver"),"object"==typeof d?d.disconnect():window.clearInterval(d),a.detach(),b.detach(),this.$select.show().unwrap(options.wrapClass),this.options=null},b}(),c.fn.extend({prettyselect:function(){var a,e;return e=arguments[0],a=2<=arguments.length?b.call(arguments,1):[],this.each(function(){var b,f;return b=c(this),f=b.data("PrettySelect"),f||b.data("PrettySelect",f=new d(this,e)),"string"==typeof e?f[e].apply(f,a):void 0})}})}(jQuery)}).call(this);